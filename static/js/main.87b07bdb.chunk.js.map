{"version":3,"sources":["setups.js","components/CellDropTarget.js","components/Cell.js","components/Player.js","settings.js","components/Item.js","components/Board.js","components/Dashboard.js","components/Controls.js","components/Game.js","App.js","index.js"],"names":["setups","goal","board","playerPositions","capacity","CellDropTarget","_ref","row","col","dropTargets","movePlayer","children","_useDrop","useDrop","accept","map","playerNum","concat","drop","item","monitor","getItemType","collect","isOver","canDrop","_useDrop2","_slicedToArray","_useDrop2$","React","createElement","className","ref","Cell","visionAdj","length","Player","number","_useDrag","useDrag","type","drag","ITEM_NAMES","COLORS","Magazine","items","corner","_ref$live","live","_ref$selectItem","selectItem","index","Item","key","_ref2","_ref2$live","_ref2$selectItem","style","backgroundColor","onClick","Board","selectNextCollectItem","numRows","numCols","DndProvider","backend","HTML5Backend","gridTemplateRows","gridTemplateColumns","cells","_loop","r","_loop2","c","findIndex","position","hasPlayer","moveAdj","positions","Math","abs","reduce","acc","val","some","arr","max","apply","_toConsumableArray","push","generateCells","Dashboard","round","bag","numDistinctItems","selectNextDropItem","bagTotal","currSum","num","color","slice","itemName","i","classes","Controls","collectItem","dropItem","displayCollectItem","displayDropItem","Game","setup","_useState","useState","_useState2","setBoard","_useState3","_useState4","setBag","_useState5","_useState6","setRound","_useState7","_useState8","nextCollect","setNextCollect","_useState9","_useState10","nextDrop","setNextDrop","_useState11","coord","_useState12","playersHistory","setPlayersHistory","currMax","rowMax","cell","cellMax","getPlayerPositions","playerHistory","itemType","parseInt","copyPlayersHistory","e","pRow","pCol","copyBoard","itemIndex","indexOf","console","log","splice","copyBag","App","SETUPS","ReactDOM","createRoot","document","getElementById","render","StrictMode"],"mappings":"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","file":"static/js/main.87b07bdb.chunk.js","sourcesContent":["export default\n[\n  {\n    goal: [7, 3, 5],\n    board: [\n      [[1], [ ], [2], [0], [0], [ ]],\n      [[1], [2], [ ], [0], [0], [0]],\n      [[2], [ ], [2], [0], [0], [0]],\n      [[0], [0], [0], [2], [ ], [2]],\n      [[0], [0], [0], [ ], [ ], [1]],\n      [[ ], [0], [0], [2], [1], [1]],\n    ],\n    playerPositions: [[5, 0]],\n    capacity: 10,\n  },\n  {\n    goal: [7, 3, 5, 0, 0],\n    board: [\n      [[1, 2, 3, 4], [ ], [2], [0], [0], [ ]],\n      [[1], [2], [ ], [0], [0], [0]],\n      [[2], [ ], [2], [0], [0], [0]],\n      [[0], [0], [0], [2], [ ], [2]],\n      [[0], [0], [0], [ ], [ ], [1]],\n      [[ ], [0], [0], [2], [1], [1]],\n    ],\n    playerPositions: [[5, 0]],\n    capacity: 1,\n  }\n]","import React from 'react';\nimport { useDrop } from 'react-dnd';\n\nexport function CellDropTarget({ row, col, dropTargets, movePlayer, children }) {\n  const [{ isOver, canDrop }, drop] = useDrop(\n    () => ({\n      accept: dropTargets.map(playerNum => `p${playerNum}`),\n      drop: (item, monitor) => movePlayer(monitor.getItemType(), row, col),\n      collect: (monitor) => ({\n        isOver: !!monitor.isOver(),\n        canDrop: !!monitor.canDrop()\n      })\n    }),\n    []\n  );\n\n  return (\n    <div\n      className='cell-drop-target'\n      ref={drop}\n    >\n      {canDrop && !isOver && <div className='highlight-possible' />}\n      {canDrop && isOver && <div className='highlight-hover' />}\n      {children}\n    </div>\n  )\n}","import React from 'react';\n\nimport { CellDropTarget } from './CellDropTarget';\n\nexport function Cell({ row, col, movePlayer, dropTargets, visionAdj, children }) {\n  if (!visionAdj && false) {\n    return (\n      <div className='cell invis' />\n    )\n  }\n\n  return (\n    dropTargets.length === 0 ?\n    <div\n      className='cell'\n    >\n      {children}\n    </div> :\n    <CellDropTarget row={row} col={col} dropTargets={dropTargets} movePlayer={movePlayer}>\n      <div className='cell'>\n        {children}\n      </div>\n    </CellDropTarget>\n  );\n}","import React from \"react\";\nimport { useDrag } from 'react-dnd';\n\nexport function Player({ number }) {\n  const [, drag] = useDrag(() => ({\n    type: `p${number}`,\n  }))\n\n  return (\n    <div className='target' ref={drag}>\n      <h1 className='player'>\n        {`P${number}`}\n      </h1>\n    </div>\n  );\n}","export const ITEM_NAMES = ['pink', 'red', 'blue', 'yellow', 'green'];\nexport const COLORS = ['pink', 'red', 'blue', 'yellow', 'green'];","import React from \"react\";\nimport { COLORS } from \"../settings\";\n\nexport function Magazine({ items, corner, live=false, selectItem=item=>{} }) {\n  return (\n    <div className={`magazine${corner ? ' corner' : ''}`}>\n      {items.length === 0 ? null : items.map((item, index) => <Item key={index} type={item} live={live} selectItem={selectItem} />)}\n    </div>\n  )\n}\n\nexport function Item({ type, live=false, selectItem=item=>{} }) {\n  return (\n    live ?\n    <div className='item live-item' style={{backgroundColor: COLORS[type]}} onClick={() => selectItem(type)} /> :\n    <div className='item' style={{backgroundColor: COLORS[type]}} />\n  );\n}","import React from 'react';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\n\nimport { Cell } from './Cell';\nimport { Player } from './Player';\nimport { Magazine } from './Item';\n\nexport function Board({ board, playerPositions, movePlayer, selectNextCollectItem }) {\n  const numRows = board.length;\n  const numCols = board[0].length;\n\n  const generateCells = (numRows, numCols, playerPositions) => {\n    const cells = [];\n    for (let r = 0; r < numRows; r++) {\n      for (let c = 0; c < numCols; c++) {\n        const playerNum = playerPositions.findIndex(position => r === position[0] && c === position[1]);\n        const hasPlayer = playerNum !== -1;\n\n        const maxAbsVal = arr => Math.max(...arr.map(Math.abs));\n        const moveAdj = playerPositions.map(\n          positions => Math.abs(positions[0] - r) + Math.abs(positions[1] - c) === 1\n        ).reduce((acc, val, index) => val ? acc.concat([index + 1]) : acc, []);\n        const visionAdj = playerPositions.some(\n          positions => maxAbsVal([positions[0] - r, positions[1] - c]) <= 1\n        );\n\n        cells.push(\n          <Cell\n            key={`${r} ${c}`}\n            row={r} col={c}\n            movePlayer={movePlayer}\n            dropTargets={moveAdj}\n            visionAdj={visionAdj}\n          >\n            {hasPlayer ? <Player number={playerNum + 1} /> : null}\n            {board[r][c].length === 0 ?\n              null :\n              <Magazine items={board[r][c]} corner={hasPlayer} live={hasPlayer} selectItem={selectNextCollectItem} />\n            }\n          </Cell>\n        );\n      }\n    }\n\n    return cells;\n  }\n\n  return (\n    <DndProvider backend={HTML5Backend}>\n      <div className='board' style={{gridTemplateRows: `repeat(${numRows}, 1fr)`, gridTemplateColumns: `repeat(${numCols}, 1fr)`}}>\n        {generateCells(numRows, numCols, playerPositions)}\n      </div>\n    </DndProvider>\n  );\n}","import React from 'react';\nimport { ITEM_NAMES } from '../settings';\n\nexport function Dashboard({ round, goal, bag, capacity, numDistinctItems, selectNextDropItem }) {\n  const bagTotal = bag.reduce((currSum, num) => currSum + num, 0);\n\n  const createBagListItem = (itemName, i) => {\n    let classes = 'list-item';\n    if (bag[i] >= goal[i]) classes += ' list-item-complete';\n    if (bag[i] !== 0) classes += ' can-drop';\n\n    return (\n      <p key={i} className={classes} onClick={() => bag[i] === 0 ? null : selectNextDropItem(i)}>\n        {`${bag[i]}/${goal[i]} ${itemName}`}\n      </p>\n    );\n  }\n\n  return (\n    <div className='dashboard'>\n      <h1 className='round-title'>{`Round ${round + 1}`}</h1>\n      <div className='bag'>\n        <h2 className='bag-title'><u>Bag</u></h2>\n        <h5 className='capacity'>Bag Total: <span style={bagTotal === capacity ? {color: 'red'} : {}}>{bagTotal}/{capacity}</span></h5>\n        {ITEM_NAMES.slice(0, numDistinctItems).map(createBagListItem)}\n      </div>\n    </div>\n  )\n}","import React from 'react';\nimport { Item } from './Item';\n\nexport function Controls({ collectItem, dropItem, displayCollectItem, displayDropItem }) {\n  return (\n    <div className='controls'>\n      <div className='control-button' onClick={collectItem}>\n        <h3>Collect</h3>\n        {displayCollectItem === null ? null : <Item type={displayCollectItem} />}\n      </div>\n      <div className='control-button' onClick={dropItem}>\n        <h3>Drop</h3>\n        {displayDropItem === null ? null : <Item type={displayDropItem} />}\n      </div>\n      <div className='control-button'>\n        <h3>Lock In</h3>\n      </div>\n    </div>\n  )\n}\n\n","import React, { useState } from 'react';\n\nimport { Board } from './Board';\nimport { Dashboard } from './Dashboard';\nimport { Controls } from './Controls';\n\nexport function Game({ setup }) {\n  const [board, setBoard] = useState(setup.board);\n  const [bag, setBag] = useState(setup.goal.map(() => 0));\n  const [round, setRound] = useState(0);\n  const [nextCollect, setNextCollect] = useState(null);\n  const [nextDrop, setNextDrop] = useState(null);\n  const [playersHistory, setPlayersHistory] = useState(setup.playerPositions.map(position => [position.map(coord => coord)]));\n\n  const numDistinctItems = board.reduce(\n    (currMax, row) => row.reduce(\n      (rowMax, cell) => cell.reduce(\n        (cellMax, item) => Math.max(cellMax, item),\n      rowMax),\n    currMax),\n  -1) + 1;\n\n  const getPlayerPositions = (playersHistory) => {\n    return playersHistory.map(playerHistory => playerHistory[playerHistory.length - 1]);\n  }\n\n  const movePlayer = (itemType, row, col) => {\n    const updatePlayersHistory = playersHistory => {\n      const playerNum = parseInt(itemType.slice(-1));\n      const copyPlayersHistory = playersHistory.map(\n        playerHistory => playerHistory.map(position => position.map(coord => coord))\n      );\n      copyPlayersHistory[playerNum - 1].push([row, col]);\n      return copyPlayersHistory;\n    }\n\n    setPlayersHistory(updatePlayersHistory);\n    setRound(round => round + 1);\n    setNextCollect(() => null);\n  }\n\n  const selectNextCollectItem = (item) => {\n    const total = bag.reduce((currSum, e) => currSum + e, 0);\n    if (total < setup.capacity) setNextCollect(() => item);\n  }\n\n  const selectNextDropItem = (item) => {\n    if (bag[item] > 0) setNextDrop(item);\n  }\n\n  const collectItem = () => {\n    const playerPositions = getPlayerPositions(playersHistory);\n    const pRow = playerPositions[0][0];\n    const pCol = playerPositions[0][1];\n\n    if (nextCollect !== null) {\n      const updateBoard = board => {\n        const copyBoard = board.map(row => row.map(cell => cell.map(item => item)));\n        const itemIndex = copyBoard[pRow][pCol].indexOf(nextCollect)\n        console.log(copyBoard[pRow][pCol]);\n        if (itemIndex !== -1) {\n          copyBoard[pRow][pCol].splice(itemIndex, 1);\n        }\n        console.log(copyBoard[pRow][pCol]);\n        return copyBoard;\n      }\n\n      const updateBag = bag => {\n        const copyBag = bag.slice();\n        copyBag[nextCollect] += 1;\n        return copyBag\n      }\n  \n      setBoard(updateBoard);\n      setBag(updateBag);\n      setNextCollect(() => null);\n      setNextDrop(() => null);\n      setRound(round => round + 1);\n    }\n  }\n\n  const dropItem = () => {\n    const playerPositions = getPlayerPositions(playersHistory);\n    const pRow = playerPositions[0][0];\n    const pCol = playerPositions[0][1];\n\n    if (nextDrop !== null) {\n      const updateBoard = board => {\n        const copyBoard = board.map(row => row.map(cell => cell.map(item => item)));\n        copyBoard[pRow][pCol].push(nextDrop);\n        return copyBoard;\n      }\n\n      const updateBag = bag => {\n        const copyBag = bag.slice();\n        copyBag[nextDrop] -= 1;\n        return copyBag\n      }\n  \n      setBoard(updateBoard);\n      setBag(updateBag);\n      setNextCollect(() => null);\n      setNextDrop(() => null);\n      setRound(round => round + 1);\n    }\n  }\n\n  return (\n    <div className='game'>\n      <h1>Maze Game</h1>\n      <div className='game-board'>\n        <Board\n          board={board}\n          playerPositions={getPlayerPositions(playersHistory)}\n          movePlayer={(itemType, row, col) => movePlayer(itemType, row, col)}\n          selectNextCollectItem={selectNextCollectItem}\n        />\n        <Dashboard round={round} goal={setup.goal} bag={bag} capacity={setup.capacity} numDistinctItems={numDistinctItems} selectNextDropItem={selectNextDropItem} />\n      </div>\n      <Controls collectItem={collectItem} dropItem={dropItem} displayCollectItem={nextCollect} displayDropItem={nextDrop} />\n    </div>\n  )\n}","import './App.css';\nimport React from 'react';\nimport SETUPS from './setups';\nimport { Game } from './components/Game'\n\nfunction App() {\n  return (\n    <div className='page'>\n      <Game setup={SETUPS[0]} />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n"],"sourceRoot":""}